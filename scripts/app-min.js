"use strict";var app=new Vue({el:"#app",data:{visitors:[],sequence:[],videoList:["assets/videos/Attractor.mp4","assets/videos/Welcome1.mp4","assets/videos/Welcome2.mp4","assets/videos/Tour1.mp4","assets/videos/Tour2.mp4","assets/videos/Tour3.mp4","assets/videos/Questions1.mp4","assets/videos/Questions2.mp4","assets/videos/Questions3.mp4","assets/videos/Questions4.mp4","assets/videos/Meeting1.mp4","assets/videos/Reflection1.mp4","assets/videos/Reflection2.mp4","assets/videos/End.mp4","assets/videos/Detected.mp4","assets/videos/Attractor_1.mp4"],isSequencePlaying:!1,isSequenceAuto:!1,sequenceIndex:0,ding:null,video:null},computed:{},methods:{playVideo:function e(s){console.log("playVideo"),this.video.src=s;var t=this.video.play(),i=this.playVideo;void 0!==t&&t.then(function(){console.log("Playback started")}).catch(function(e){console.error(e),console.log("error: reloading..."),setTimeout(function(){location.reload()},2e3)})},stopAttractor:function e(){this.video.pause()},startRandomSequence:function e(){this.sequence=[],this.sequence[0]=this.videoList[14],this.sequence[1]=this.videoList[this.getRandomInt(1,2)],this.sequence[2]=this.videoList[this.getRandomInt(3,5)],this.sequence[3]=this.videoList[this.getRandomInt(6,9)],this.sequence[4]=this.videoList[10],this.sequence[5]=this.videoList[this.getRandomInt(11,12)],this.sequence[6]=this.videoList[13],this.sequenceIndex=0,this.isSequencePlaying=!0,this.playVideo(this.sequence[this.sequenceIndex])},addVisitor:function e(){var s=Math.random().toString(36).substr(2,7).toUpperCase();this.visitors.push(s),this.ding.play(),this.isSequenceAuto=!1,this.isSequencePlaying||(this.stopAttractor(),this.startRandomSequence())},removeVisitor:function e(){},onVideoEnded:function e(){this.isSequencePlaying?this.sequenceIndex==this.sequence.length-1?(console.log("no more videos, play attractor"),this.isSequencePlaying=!1,this.playVideo(this.videoList[15])):(this.sequenceIndex++,this.playVideo(this.sequence[this.sequenceIndex])):(console.log("attractor has finished, play a random sequence"),this.isSequenceAuto=!0,this.startRandomSequence())},getRandomInt:function e(s,t){return s=Math.ceil(s),t=Math.floor(t),Math.floor(Math.random()*(t-s+1))+s}},mounted:function e(){var s=this;window.addEventListener("load",function(){s.ding=new Audio("../assets/audio/91926__corsica-s__ding.wav"),s.ding.volume=.4,s.video=document.getElementById("video"),s.video.addEventListener("ended",s.onVideoEnded),s.playVideo(s.videoList[15])})}});